<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>System Design Roadmap Timeline</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .timeline-line {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 4px;
            background: linear-gradient(to bottom, #3b82f6, #10b981, #f59e0b, #ef4444);
            z-index: 1;
        }

        .timeline-dot {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 20px;
            height: 20px;
            border-radius: 50%;
            z-index: 2;
            border: 4px solid white;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.2);
        }

        .timeline-item {
            position: relative;
            margin-bottom: 60px;
        }

        .timeline-content {
            width: 45%;
            position: relative;
        }

        .timeline-left {
            margin-left: 0;
            text-align: right;
        }

        .timeline-right {
            margin-left: 55%;
            text-align: left;
        }

        .progress-animation {
            transition: width 0.5s ease-in-out;
        }

        /* Enhanced mobile responsiveness */
        @media (max-width: 1024px) {
            .timeline-content {
                width: 48%;
            }
        }

        @media (max-width: 768px) {
            .timeline-line {
                left: 20px;
                width: 3px;
            }

            .timeline-dot {
                left: 20px;
                width: 16px;
                height: 16px;
                border: 3px solid white;
            }

            .timeline-content {
                width: calc(100% - 50px) !important;
                margin-left: 50px !important;
                text-align: left !important;
            }

            .timeline-item {
                margin-bottom: 40px;
            }

            /* Better touch targets */
            input[type="checkbox"] {
                width: 18px;
                height: 18px;
                min-width: 18px;
                min-height: 18px;
            }

            label {
                cursor: pointer;
                -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
                padding: 8px 4px;
                margin: -8px -4px;
                border-radius: 4px;
            }

            /* Improved scrollable areas */
            .checklist-container {
                max-height: 250px;
                -webkit-overflow-scrolling: touch;
            }
        }

        @media (max-width: 480px) {
            .timeline-line {
                left: 16px;
                width: 2px;
            }

            .timeline-dot {
                left: 16px;
                width: 12px;
                height: 12px;
                border: 2px solid white;
            }

            .timeline-content {
                width: calc(100% - 40px) !important;
                margin-left: 40px !important;
            }

            .timeline-item {
                margin-bottom: 32px;
            }

            /* Smaller screens adjustments */
            .checklist-container {
                max-height: 200px;
            }

            /* Better button sizing */
            button {
                padding: 12px 24px !important;
                font-size: 14px;
            }

            /* Compact progress display */
            .progress-compact {
                flex-direction: column;
                align-items: stretch !important;
                gap: 8px;
            }

            .progress-compact .progress-info {
                text-align: center;
            }
        }

        @media (max-width: 320px) {
            .timeline-content {
                width: calc(100% - 32px) !important;
                margin-left: 32px !important;
            }

            .checklist-container {
                max-height: 180px;
            }
        }

        /* Touch-friendly interactions */
        @media (hover: none) and (pointer: coarse) {
            .timeline-content > div {
                transition: transform 0.2s ease;
            }

            .timeline-content > div:active {
                transform: scale(0.98);
            }

            label:active {
                background-color: rgba(59, 130, 246, 0.1);
            }

            button:active {
                transform: scale(0.95);
            }
        }

        /* Dark mode improvements for mobile */
        @media (max-width: 768px) {
            .dark .timeline-dot {
                border-color: #374151;
            }
        }
    </style>
</head>

<body
    class="bg-gradient-to-br from-gray-50 to-gray-100 dark:from-gray-900 dark:to-gray-800 text-gray-900 dark:text-gray-100 min-h-screen">
    <div class="max-w-6xl mx-auto py-6 md:py-10 px-3 md:px-4">
        <!-- Header Section -->
        <div class="text-center mb-8 md:mb-12">
            <h1
                class="text-2xl md:text-4xl font-bold mb-4 bg-gradient-to-r from-blue-600 via-[#eddff9] to-[#e7c7d5] bg-clip-text text-transparent px-2">
                ðŸ”Œ System Design FE Roadmap
            </h1>

            <!-- Overall Progress Display -->
            <div class="bg-white dark:bg-gray-800 rounded-lg p-3 md:p-4 shadow-lg inline-block w-full max-w-sm">
                <div class="flex items-center justify-center space-x-4 progress-compact">
                    <div class="text-xs md:text-sm progress-info">
                        <span class="font-semibold">Overall Progress:</span>
                        <span id="overall-progress" class="text-blue-600 dark:text-blue-400 font-bold">0%</span>
                    </div>
                    <div class="w-[90%] md:w-32 bg-gray-200 rounded-full h-2">
                        <div id="overall-progress-bar"
                            class="bg-gradient-to-r from-blue-500 to-purple-500 h-2 rounded-full progress-animation"
                            style="width: 0%"></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Timeline Container -->
        <div class="relative" id="timeline-wrapper">
            <!-- Timeline Line -->
            <div class="timeline-line" id="timeline-line"></div>

            <!-- Timeline Items Container -->
            <div id="timeline-container"></div>
        </div>

        <!-- Reset Button -->
        <div class="text-center mt-8 md:mt-12">
            <button id="reset-progress"
                class="bg-red-500 hover:bg-red-600 active:bg-red-700 text-white px-4 md:px-6 py-2 md:py-3 rounded-lg shadow-lg transition-all duration-200 text-sm md:text-base">
                Reset All Progress
            </button>
        </div>
    </div>

    <script>
        // Global progress data with localStorage support
        const progressData = {};
        const STORAGE_KEY = 'system-design-fe-progress';

        // Timeline data
        const timelineData = [
            {
                id: 'networking',
                title: '1. Networking',
                color: 'blue',
                items: [
                    'Networking - Experience',
                    'How the Web Works',
                    'Communication Protocols',
                    'REST APIs',
                    'GraphQL',
                    'gRPC'
                ]
            },
            {
                id: 'communication',
                title: '2. Communication',
                color: 'green',
                items: [
                    'Communication - Experience',
                    'Communication Overview',
                    'Short Polling',
                    'Long Polling',
                    'Web Sockets',
                    'Server-Sent Events',
                    'Webhooks'
                ]
            },
            {
                id: 'security',
                title: '3. Security',
                color: 'red',
                items: [
                    'Security Overview',
                    'Cross-site Scripting (XSS)',
                    'iFrame Protection',
                    'Security Headers',
                    'Client-side Security',
                    'Secure Communication (HTTPS)',
                    'Dependency Security',
                    'Compliance & Regulation',
                    'Input Validation & Sanitization',
                    'SSRF',
                    'SSJI',
                    'Feature/Permissions Policy',
                    'Subresource Integrity (SRI)',
                    'Cross-Origin Resource Sharing (CORS)',
                    'Cross-Site Request Forgery (CSRF)'
                ]
            },
            {
                id: 'testing',
                title: '4. Testing',
                color: 'purple',
                items: [
                    'Why testing important?',
                    'Testing Overview',
                    'Unit & Integration Testing',
                    'E2E & Automation Testing',
                    'A/B Testing',
                    'Performance Testing',
                    'TDD Overview',
                    'Security Testing',
                    'React Component Testing'
                ]
            },
            {
                id: 'performance',
                title: '5. Performance',
                color: 'yellow',
                items: [
                    'Performance Overview',
                    'Performance Importance',
                    'Performance Monitoring',
                    'Performance Tools',
                    'Network Optimization',
                    'Rendering Patterns',
                    'Build Optimization'
                ]
            },
            {
                id: 'database',
                title: '6. Database & Caching',
                color: 'indigo',
                items: [
                    'Database & Caching Overview',
                    'Local Storage',
                    'Session Storage',
                    'Cookie Storage',
                    'IndexedDB',
                    'Normalization',
                    'HTTP Caching',
                    'Service Worker Caching',
                    'API Caching',
                    'State Management'
                ]
            },
            {
                id: 'logging',
                title: '7. Logging & Monitoring',
                color: 'pink',
                items: [
                    'Logging & Monitoring Overview',
                    'Telemetry',
                    'Alerting',
                    'Fixing Issues'
                ]
            },
            {
                id: 'accessibility',
                title: '8. Accessibility',
                color: 'cyan',
                items: [
                    'Accessibility Overview',
                    'Keyboard Accessibility',
                    'Screen Reader',
                    'Focus Management',
                    'Color Contrast',
                    'Accessibility Tools',
                    'How to Fix Accessibility'
                ]
            },
            {
                id: 'low_level',
                title: '10. Low Level Design',
                color: 'emerald',
                items: [
                    'Component Design â€“ Modular component-based design techniques',
                    'Config Driven UI â€“ Introduction to config-driven UI',
                    'Shimmer UI â€“ Better way to show loading states',
                    'Routing & Protected Routes â€“ Seamless navigation & security',
                    'State Management + Libraries â€“ Complex state handling',
                    'Multi Language Support â€“ Implementation techniques',
                    'Infinite Scroll â€“ Dynamic content loading',
                    'Accordion â€“ User-friendly collapsible UI',
                    'Reddit Nested Comments â€“ Threaded discussion design',
                    'Image Slider â€“ LLD implementation',
                    'Pagination Part-1 â€“ User-friendly browsing',
                    'Pagination Part-2 â€“ Coding pagination',
                    'Real-Time Updates â€“ Handling live changes',
                    'YouTube Live Stream Chat UI â€“ Chat UI design',
                    'Autocomplete & Search Bar â€“ Efficient search UX'
                ]
            },
            {
                id: 'high_level',
                title: '11. High Level Design',
                color: 'teal',
                items: [
                    'HLD Overview â€“ Grasp essentials of high-level design principles',
                    'HLD - Photo Sharing App (Instagram)',
                    'HLD - E-commerce App (Amazon, Flipkart)',
                    'HLD - News Media Feed (Facebook, Twitter)',
                    'HLD - Video Streaming (Netflix)',
                    'HLD - Music Streaming (Spotify)',
                    'HLD - Live Commentary (CricInfo, Crickbuzz)',
                    'HLD - Email Client (Gmail, Outlook)',
                    'HLD - Diagram Tools (Excalidraw)',
                    'HLD - Analytics Dashboard (Google Analytics)',
                    'HLD - Google Docs',
                    'HLD - Google Sheets'
                ]
            }
        ];

        // Color mapping for Tailwind classes
        const colorClasses = {
            blue: { bg: 'bg-blue-500', text: 'text-blue-600', border: 'border-blue-500' },
            green: { bg: 'bg-green-500', text: 'text-green-600', border: 'border-green-500' },
            red: { bg: 'bg-red-500', text: 'text-red-600', border: 'border-red-500' },
            purple: { bg: 'bg-purple-500', text: 'text-purple-600', border: 'border-purple-500' },
            yellow: { bg: 'bg-yellow-500', text: 'text-yellow-600', border: 'border-yellow-500' },
            indigo: { bg: 'bg-indigo-500', text: 'text-indigo-600', border: 'border-indigo-500' },
            pink: { bg: 'bg-pink-500', text: 'text-pink-600', border: 'border-pink-500' },
            cyan: { bg: 'bg-cyan-500', text: 'text-cyan-600', border: 'border-cyan-500' },
            emerald: { bg: 'bg-emerald-500', text: 'text-emerald-600', border: 'border-emerald-500' },
            teal: { bg: 'bg-teal-500', text: 'text-teal-600', border: 'border-teal-500' }
        };

        // Load progress from localStorage
        function loadProgress() {
            try {
                const saved = localStorage.getItem(STORAGE_KEY);
                if (saved) {
                    const parsedData = JSON.parse(saved);
                    // Merge saved data with progressData
                    Object.keys(parsedData).forEach(sectionId => {
                        if (progressData[sectionId]) {
                            Object.keys(parsedData[sectionId]).forEach(itemIndex => {
                                progressData[sectionId][itemIndex] = parsedData[sectionId][itemIndex];
                            });
                        }
                    });
                }
            } catch (error) {
                console.warn('Failed to load progress from localStorage:', error);
            }
        }

        // Save progress to localStorage
        function saveProgress() {
            try {
                localStorage.setItem(STORAGE_KEY, JSON.stringify(progressData));
            } catch (error) {
                console.warn('Failed to save progress to localStorage:', error);
            }
        }

        // Initialize progress data
        function initializeProgress() {
            timelineData.forEach(section => {
                progressData[section.id] = {};
                section.items.forEach((item, index) => {
                    progressData[section.id][index] = false;
                });
            });
            // Load saved progress after initialization
            loadProgress();
        }

        // Calculate section progress
        function calculateSectionProgress(sectionId) {
            const sectionData = progressData[sectionId];
            if (!sectionData) return 0;

            const total = Object.keys(sectionData).length;
            const completed = Object.values(sectionData).filter(Boolean).length;
            return total === 0 ? 0 : Math.round((completed / total) * 100);
        }

        // Calculate overall progress
        function calculateOverallProgress() {
            let totalItems = 0;
            let completedItems = 0;

            timelineData.forEach(section => {
                const sectionData = progressData[section.id];
                if (sectionData) {
                    totalItems += Object.keys(sectionData).length;
                    completedItems += Object.values(sectionData).filter(Boolean).length;
                }
            });

            return totalItems === 0 ? 0 : Math.round((completedItems / totalItems) * 100);
        }

        // Update progress displays
        function updateProgress() {
            // Update section progress bars
            timelineData.forEach(section => {
                const progress = calculateSectionProgress(section.id);
                const progressBar = document.getElementById(`progress-${section.id}`);
                const progressText = document.getElementById(`progress-text-${section.id}`);

                if (progressBar && progressText) {
                    progressBar.style.width = `${progress}%`;
                    progressText.textContent = `${progress}%`;
                }
            });

            // Update overall progress
            const overallProgress = calculateOverallProgress();
            const overallProgressEl = document.getElementById('overall-progress');
            const overallProgressBar = document.getElementById('overall-progress-bar');

            if (overallProgressEl && overallProgressBar) {
                overallProgressEl.textContent = `${overallProgress}%`;
                overallProgressBar.style.width = `${overallProgress}%`;
            }
        }

        // Handle checkbox changes
        function handleCheckboxChange(sectionId, itemIndex, checked) {
            if (progressData[sectionId]) {
                progressData[sectionId][itemIndex] = checked;
                saveProgress(); // Save to localStorage whenever progress changes
                updateProgress();
            }
        }

        // Generate timeline HTML
        function generateTimeline() {
            const container = document.getElementById('timeline-container');
            if (!container) return;

            container.innerHTML = '';

            timelineData.forEach((section, index) => {
                const isLeft = index % 2 === 0;
                const progress = calculateSectionProgress(section.id);
                const colors = colorClasses[section.color];

                const timelineItem = document.createElement('div');
                timelineItem.className = 'timeline-item';

                timelineItem.innerHTML = `
                    <!-- Timeline Dot -->
                    <div class="timeline-dot ${colors.bg}"></div>
                    
                    <!-- Timeline Content -->
                    <div class="timeline-content ${isLeft ? 'timeline-left' : 'timeline-right'}">
                        <div class="bg-white dark:bg-gray-800 rounded-xl md:rounded-2xl shadow-lg md:shadow-xl p-4 md:p-6 hover:shadow-xl md:hover:shadow-2xl transition-shadow border-l-4 ${colors.border}">
                            <h2 class="text-lg md:text-2xl font-bold mb-3 md:mb-4 ${colors.text}">${section.title}</h2>
                            
                            <!-- Progress Bar -->
                            <div class="mb-4">
                                <div class="flex justify-between items-center mb-2">
                                    <span class="text-xs md:text-sm font-medium">Progress</span>
                                    <span id="progress-text-${section.id}" class="text-xs md:text-sm font-bold ${colors.text}">${progress}%</span>
                                </div>
                                <div class="w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2 md:h-3">
                                    <div id="progress-${section.id}" class="h-2 md:h-3 rounded-full progress-animation ${colors.bg}" style="width: ${progress}%"></div>
                                </div>
                            </div>
                            
                            <!-- Checklist -->
                            <ul class="space-y-2 md:space-y-3 checklist-container overflow-y-auto">
                                ${section.items.map((item, itemIndex) => `
                                    <li class="flex items-start space-x-2 md:space-x-3">
                                        <input 
                                            type="checkbox" 
                                            id="${section.id}-${itemIndex}"
                                            class="mt-1 h-4 w-4 md:h-4 md:w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 flex-shrink-0"
                                            ${progressData[section.id] && progressData[section.id][itemIndex] ? 'checked' : ''}
                                            onchange="handleCheckboxChange('${section.id}', ${itemIndex}, this.checked)"
                                        >
                                        <label for="${section.id}-${itemIndex}" class="text-xs md:text-sm leading-relaxed cursor-pointer hover:text-blue-600 dark:hover:text-blue-400 transition-colors select-none">
                                            ${item}
                                        </label>
                                    </li>
                                `).join('')}
                            </ul>
                        </div>
                    </div>
                `;

                container.appendChild(timelineItem);
            });

            // Set timeline line height
            const timelineLineEl = document.getElementById('timeline-line');
            if (timelineLineEl && container) {
                timelineLineEl.style.height = `89.5%`;
            }
        }

        // Reset all progress
        function resetProgress() {
            if (confirm('Are you sure you want to reset all progress? This action cannot be undone.')) {
                // Clear localStorage
                try {
                    localStorage.removeItem(STORAGE_KEY);
                } catch (error) {
                    console.warn('Failed to clear localStorage:', error);
                }

                // Reset in-memory data
                initializeProgress();

                // Uncheck all checkboxes and regenerate timeline
                generateTimeline();
                updateProgress();
            }
        }

        // Initialize the app
        document.addEventListener('DOMContentLoaded', function () {
            initializeProgress();
            generateTimeline();
            updateProgress();

            // Add event listener for reset button
            const resetBtn = document.getElementById('reset-progress');
            if (resetBtn) {
                resetBtn.addEventListener('click', resetProgress);
            }
        });

        // Make functions globally available
        window.handleCheckboxChange = handleCheckboxChange;
    </script>
</body>

</html>